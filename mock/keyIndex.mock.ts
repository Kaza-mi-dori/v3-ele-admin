import path from "path";
import { createDefineMock } from "vite-plugin-mock-dev-server";

export const defineMock = createDefineMock((mock) => {
  // 拼接url
  mock.url = path.join(
    import.meta.env.VITE_APP_API_URL_DEV + "/api/v1/keyIndex",
    mock.url
  );
});

const revenueData = {
  营收: {
    "2025-01": {
      广投石化本部: {
        "#92汽油": {
          当期计划值: 105,
          当期实际值: 112,
          累计值: 112,
          环比: 15.0,
          同比增长: 18.0,
          同比增幅: "18.0%",
        },
        "#95汽油": {
          当期计划值: 85,
          当期实际值: 92,
          累计值: 92,
          环比: 12.0,
          同比增长: 16.0,
          同比增幅: "16.0%",
        },
        "#98汽油": {
          当期计划值: 45,
          当期实际值: 50,
          累计值: 50,
          环比: 20.0,
          同比增长: 25.0,
          同比增幅: "25.0%",
        },
        "#0柴油": {
          当期计划值: 120,
          当期实际值: 128,
          累计值: 128,
          环比: 10.0,
          同比增长: 14.0,
          同比增幅: "14.0%",
        },
        原油: {
          当期计划值: 500,
          当期实际值: 530,
          累计值: 530,
          环比: 8.0,
          同比增长: 12.0,
          同比增幅: "12.0%",
        },
      },
      广投石化广东分公司: {
        "#92汽油": {
          当期计划值: 80,
          当期实际值: 85,
          累计值: 85,
          环比: 10.0,
          同比增长: 12.0,
          同比增幅: "12.0%",
        },
        "#95汽油": {
          当期计划值: 60,
          当期实际值: 65,
          累计值: 65,
          环比: 8.0,
          同比增长: 10.0,
          同比增幅: "10.0%",
        },
        "#0柴油": {
          当期计划值: 90,
          当期实际值: 95,
          累计值: 95,
          环比: 12.0,
          同比增长: 15.0,
          同比增幅: "15.0%",
        },
      },
      永盛仓储: {
        原油: {
          当期计划值: 400,
          当期实际值: 420,
          累计值: 420,
          环比: 6.0,
          同比增长: 8.0,
          同比增幅: "8.0%",
        },
      },
    },
    "2025-02": {
      广投石化本部: {
        "#92汽油": {
          当期计划值: 110,
          当期实际值: 118,
          累计值: 230,
          环比: 5.4,
          同比增长: 16.0,
          同比增幅: "16.0%",
        },
        "#95汽油": {
          当期计划值: 90,
          当期实际值: 96,
          累计值: 188,
          环比: 4.3,
          同比增长: 14.0,
          同比增幅: "14.0%",
        },
        原油: {
          当期计划值: 520,
          当期实际值: 550,
          累计值: 1080,
          环比: 3.8,
          同比增长: 10.0,
          同比增幅: "10.0%",
        },
      },
      广投石化舟山: {
        "#0柴油": {
          当期计划值: 70,
          当期实际值: 75,
          累计值: 75,
          环比: 8.0,
          同比增长: 12.0,
          同比增幅: "12.0%",
        },
        原油: {
          当期计划值: 350,
          当期实际值: 370,
          累计值: 370,
          环比: 5.7,
          同比增长: 9.0,
          同比增幅: "9.0%",
        },
      },
    },
    "2025-03": {
      广投石化本部: {
        "#92汽油": {
          当期计划值: 115,
          当期实际值: 125,
          累计值: 355,
          环比: 5.9,
          同比增长: 14.0,
          同比增幅: "14.0%",
        },
        "#98汽油": {
          当期计划值: 50,
          当期实际值: 55,
          累计值: 105,
          环比: 10.0,
          同比增长: 20.0,
          同比增幅: "20.0%",
        },
        原油: {
          当期计划值: 540,
          当期实际值: 570,
          累计值: 1650,
          环比: 3.6,
          同比增长: 8.0,
          同比增幅: "8.0%",
        },
      },
      开燃公司: {
        "#92汽油": {
          当期计划值: 70,
          当期实际值: 75,
          累计值: 75,
          环比: 7.0,
          同比增长: 9.0,
          同比增幅: "9.0%",
        },
        "#0柴油": {
          当期计划值: 80,
          当期实际值: 85,
          累计值: 85,
          环比: 6.0,
          同比增长: 8.0,
          同比增幅: "8.0%",
        },
      },
    },
  },
  利润: {
    "2025-01": {
      广投石化本部: {
        "#92汽油": {
          当期计划值: 18,
          当期实际值: 20,
          累计值: 20,
          环比: 20.0,
          同比增长: 25.0,
          同比增幅: "25.0%",
        },
        "#98汽油": {
          当期计划值: 12,
          当期实际值: 14,
          累计值: 14,
          环比: 16.7,
          同比增长: 33.3,
          同比增幅: "33.3%",
        },
      },
      桂盛桂轩: {
        "#92汽油": {
          当期计划值: 10,
          当期实际值: 11,
          累计值: 11,
          环比: 10.0,
          同比增长: 15.0,
          同比增幅: "15.0%",
        },
      },
    },
  },
  采购量: {
    "2025-02": {
      恒润公司: {
        原油: {
          当期计划值: 300,
          当期实际值: 320,
          累计值: 320,
          环比: 6.7,
          同比增长: 7.0,
          同比增幅: "7.0%",
        },
      },
    },
  },
};

const profitData = {
  利润: {
    "2025-01": {
      广投石化本部: {
        "#92汽油": {
          当期计划值: 18,
          当期实际值: 20,
          累计值: 20,
          环比: 20.0,
          同比增长: 25.0,
          同比增幅: "25.0%",
        },
      },
    },
  },
};

const enterpriseRelationData = {
  石化板块: {
    广投石化: {
      广投石化本部: {},
      广投石化广东分公司: {},
      永盛仓储: {},
      开燃公司: {},
      广投石化舟山: {},
    },
    桂盛桂轩: {},
    开燃公司: {},
    恒润公司: {},
  },
};

// 获得一个树结构，解构后可以获得成品油和原油的关系
const productRelationData = {
  成品油: {
    汽油: {
      "#92汽油": {},
      "#95汽油": {},
      "#98汽油": {},
    },
    柴油: {
      "#0柴油": {},
    },
  },
  原油: {},
};

export default defineMock([
  {
    url: "getIndexData",
    method: ["GET"],
    body: {
      code: "00000",
      data: {
        ...revenueData,
        ...profitData,
      },
      msg: "一切ok",
    },
  },
  // 获取企业的父子关系以确定如何拼装数据
  // 根据参数确定返回数据
  {
    url: "getEnterpriseRelation",
    method: ["GET"],
    body: {
      code: "00000",
      data: enterpriseRelationData,
    },
  },
  // 获取产品类型的包含关系以确定如何拼装数据
  {
    url: "getProductRelation",
    method: ["GET"],
    body: {
      code: "00000",
      data: productRelationData,
    },
  },
]);
